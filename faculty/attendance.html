<!doctype html>
<html lang="en">

<head>    
    <meta charset="utf-8">
    <meta name="description" content="SAMS">
    <meta name="keywords" content="Attendance">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="author" content="SAMS">
    <script>

      if(!(localStorage['login']=="success")){
            window.location.replace("login");
        }
          function logout(){
          alert("logout");
          localStorage.removeItem("login");
          localStorage.removeItem("sid");
          window.location.replace("login");
      }

        window.onbeforeunload = function() {

          localStorage.removeItem(login);
          localStorage.removeItem(sid);
          return '';
        };
    </script>
    <title>SAMS</title>
    <link rel="icon" href="../img/icon.png"  type="image/x-icon" />
    <link href="../css/bootstrap.css" rel="stylesheet">
    <!-- Font Awesome CSS -->
    <link rel="stylesheet" href="../fonts/font-awesome.min.css" type="text/css" media="screen">
    <!-- Include roboto.css to use the Roboto web font, material.css to include the theme and ripples.css to style the ripple effect -->
    <link href="../css/material.min.css" rel="stylesheet">
    <link href="../css/ripples.min.css" rel="stylesheet">
    <link href="../css/main.css" rel="stylesheet">
    <link href="../css/responsive.css" rel="stylesheet">
    <link href="../css/animate.min.css" rel="stylesheet">
    <link href="../css/settings.css" rel="stylesheet">
     <link rel="stylesheet" type="text/css" href="../css/toggle.css">

  </head>

  <body style="background:#eee">

    <div class="navbar navbar-invers menu-wrap">
      <div class="navbar-header text-center">
        <a class="navbar-brand logo-right" href="javascript:void(0)"><i class="fa fa-check-square-o"></i>SAMS</a>
        </div>
          <ul class="nav navbar-nav main-navigation">
            <li><a href="index">Home</a></li>
            <li><a href="profile">Profile</a></li>
            <li><a href="attendance">Attendance</a></li>
            <li><a href="time_table">Time Table</a></li>
            <li><a href="calendar">Calendar</a></li>
            <li><a href="syllabus">Syllabus</a></li>
            <li><a href="library">Library</a></li>
            <li><a href="internals">Internals</a></li>
            <li><a href="settings">Settings</a></li>
            <li><a href="#" onclick="logout()"> <i class="fa fa-power-off" aria-hidden="true"></i> &nbsp;Logout </a></li>
          </ul>
          <button class="close-button" id="close-button">Close Menu</button>
      </div>
      
      <div class="content-wrap">
        <header class="slider-area" id="home">      
          <div class="container">
            <div class="col-md-12">
                <div class="navbar navbar-inverse sticky-navigation navbar-fixed-top" role="navigation" data-spy="affix" data-offset-top="200">
                  <div class="container">
                    <div class="navbar-header">
                      <a class="logo-left " href="index"><i class="fa fa-check-square-o"></i>SAMS</a>
                    </div>
                    <div class="navbar-right">
                      <button class="menu-icon"  id="open-button">
                        <i class="mdi-navigation-menu"></i>
                      </button>             
                    </div>
                  </div>
                </div>
            </div>     
          </div>  
          <!-- Main Slider Section -->
          
          <div class="container" style="position:relative;top:100px">
            <center><h2>ATTENDANCE</h2></center> 
            <div class="">
                <div class="col-md-8">
                  <h3 class="btn btn-primary" style="width:90%">TAKE ATTENDANCE</h3>
                <div id="put_att_details">  
                  <form role="form" id="AttendanceForm" class="contact-form" >
                  <div class="">
                      <div class="form-group col-md-4">
                        <div class="controls">
                          <label>Branch:</label>
                          <select name="branch" id="branch" class="form-control" required>
                          <option value="null" selected disabled>Select Branch</option>
                          <option value="CSE">CSE</option>
                          <option value="ISE">ISE</option>
                          <option value="ECE">ECE</option>
                          <option value="EEE">EEE</option>
                          <option value="ME">ME</option>
                          <option value="CIVIL">CIVIL</option>
                         
                            
                          </select>
                          
                        </div>
                      </div>
                      <div class="form-group col-md-4">
                        <div class="controls">
                          <label>Sem:</label>
                          <select name="sem" id="sem" class="form-control" onchange="fetch_section()" required>
                          <option value="null" selected disabled>Select Semester</option>
                          <option value="8">8</option>
                          <option value="7">7</option>
                          <option value="6">6</option>
                          <option value="5">5</option>
                          <option value="4">4</option>
                          <option value="3">3</option>
                          <option value="2">2</option>
                          <option value="1">1</option>
                            
                          </select>
                          
                        </div>
                      </div>
                      <div class="form-group col-md-4">
                        <div class="controls">
                          <label>Section/class:</label>
                          <select name="section" id="section" class="form-control" required>
                           <option value="null" selected disabled>Select Section</option> 
                          </select>
                          
                        </div>
                      </div>
                      
                      <div class="form-group">
                        <div class="controls">
                          <label>Subject :</label>
                            <select name="subject" id="subject" class="form-control" placeholder="Name" value="" required>
                            <option value="null" selected disabled>Select Subject</option>
                          </select>
                          </div>
                      </div>
                      <div class="form-group col-md-6">
                        <div class="controls">
                          <label>Select Date</label>
                           <input name="date" type="date" value="" id="date" class="form-control">
                          </div>
                      </div>
                      <div class="form-group col-md-6">
                        <div class="controls">
                          <label>Select Slot</label>
                           <select name="slot" id="slot" class="form-control"  required>
                            <option disabled selected>SLOT</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                          </select>
                          </div>
                      </div>
                      <div class="col-md-12" >
                     <center> <button type="button" id="AttendanceForm" class="btn btn-primary" onclick="takeAttendance()">Take Attendance</button> </center>
                      <div id="msgSubmit" class="h3 text-center"></div> 
                      <div class="clearfix"></div>   
                    </div>
                  </div> 
                  
                  </form>     
                  <!-- End  Form -->
                </div>
                <div id="take_attendance">
                  <table class="table table-hover table-striped" id="student_display">
                      <thead>
                         <th>Sl</th>
                        <th width="10%">USN</th>
                        <th width="40%">STUDENT NAME</th>
                        <th width="10%">PRESTENT / ABSENT</th>
                        <th width="40%">REMARKS</th>
                     </thead>
                        
                      
                    </table>
                    <div class="" id="submit_att">
                     <center> <button type="button" id="submit_attendance" class="btn btn-primary" ></i>Submit</button> </center>
                     </div> 
                </div>
                </div>
                <div class="col-md-4">
                  <h3 class="btn btn-primary" style="width:90%">VIEW ATTENDANCE</h3>
                  <form role="form" id="AttendanceForm2" class="contact-form" method="post" action="view_attendance">
                  <div class="">
                      <div class="form-group">
                        <div class="controls">
                          <label>Section/class:</label>
                          <select id="name" class="form-control" placeholder="Name" value="class" required>
                            <option disabled selected>Select Class</option>
                            <option>8th Sem ISE</option>
                            <option>8th Sem CSE</option>
                            <option>8th Sem CSE</option>
                          </select>
                          
                        </div>
                      </div>
                      
                      <div class="form-group">
                        <div class="controls">
                          <label>Subject</label>
                            <select id="subjectx" class="form-control" required>
                            <option disabled selected>Subject Name</option>
                           
                          </select>
                          </div>
                      </div>
                     </form>  
                      <div class="col-md-12" >
                     <center> <button type="button" id="AttendanceForm" class="btn btn-primary" ></i>View Attendance</button> </center>
                      <div id="msgSubmit" class="h3 text-center"></div> 
                      <div class="clearfix"></div>   
                    </div>
                  </div> 
                  
                      
                  <!-- End  Form -->
                </div>
            </div>
          </div>
        <div id="loader">
         <div class="loader-inner ball-triangle-path">
            <div></div>
            <div></div>
            <div></div>
          </div>
        </div>


    <script src="../js/jquery-2.1.4.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/ripples.min.js"></script>
    <script src="../js/material.min.js"></script>
    <script src="../js/wow.js"></script>
    <script src="../js/jquery.mmenu.min.all.js"></script> 
    <script src="../js/count-to.js"></script>   
    <script src="../js/jquery.inview.min.js"></script>
    <script src="../js/form-validator.min.js"></script>  
    <script src="../js/contact-form-script.js"></script>     
    <script src="../js/main-alt.js"></script>
    <script src="../js/classie.js"></script>
    <script src="../js/jquery.nav.js"></script>      
    <script src="../js/jquery.themepunch.revolution.min.js"></script>
    <script src="../js/jquery.themepunch.tools.min.js"></script>
    

    <script>
        $(document).ready(function() {
            // This command is used to initialize some elements and make them work properly
            $.material.init();
             jQuery('.tp-banner').show().revolution({
              dottedOverlay: "none",
              delay: 16000,
              startwidth: 1170,
              startheight: 650,
              hideThumbs: 200,
              thumbWidth: 100,
              thumbHeight: 50,
              thumbAmount: 5,
              navigationType: "bullet",
              navigationArrows: "solo",
              navigationStyle: "preview4",
              touchenabled: "on",
              onHoverStop: "on",
              swipe_velocity: 0.7,
              swipe_min_touches: 1,
              swipe_max_touches: 1,
              drag_block_vertical: false,
              parallax: "mouse",
              parallaxBgFreeze: "on",
              parallaxLevels: [7, 4, 3, 2, 5, 4, 3, 2, 1, 0],
              keyboardNavigation: "off",
              navigationHAlign: "center",
              navigationVAlign: "bottom",
              navigationHOffset: 0,
              navigationVOffset: 20,
              soloArrowLeftHalign: "left",
              soloArrowLeftValign: "center",
              soloArrowLeftHOffset: 20,
              soloArrowLeftVOffset: 0,
              soloArrowRightHalign: "right",
              soloArrowRightValign: "center",
              soloArrowRightHOffset: 20,
              soloArrowRightVOffset: 0,
              shadow: 0,
              fullWidth: "on",
              fullScreen: "off",
              spinner: "spinner1",
              stopLoop: "off",
              stopAfterLoops: -1,
              stopAtSlide: -1,
              shuffle: "off",
              autoHeight: "off",
              forceFullWidth: "off",
              hideThumbsOnMobile: "off",
              hideNavDelayOnMobile: 1500,
              hideBulletsOnMobile: "off",
              hideArrowsOnMobile: "off",
              hideThumbsUnderResolution: 0,
              hideSliderAtLimit: 0,
              hideCaptionAtLimit: 0,
              hideAllCaptionAtLilmit: 0,
              startWithSlide: 0,
              videoJsPath: "rs-plugin/videojs/",
              fullScreenOffsetContainer: ""
            });
        });

    </script>

    <script type="text/javascript">
     $( document ).ready(function() {
        $("#submit_att").hide();
        $("#take_attendance").hide();
    });
       function fetch_section(){
              
               var eid=localStorage.getItem("sid");
               var branch=document.getElementById("branch").value;
               var sem=document.getElementById("sem").value;
               if (branch!="null") {
               
                  $('#section').find('option:not(:first)' ).remove();
                  $.ajax({
                    url:"load_section.php",
                    type:"post",
                    data:{ 'branch':branch,
                        'sem':sem,
                        'eid':eid
                      },
                    success:function(data){
                     
                      var obj=JSON.parse(data);
                      $.each(obj,function(index,value){
                        $('#section').append($('<option>', {
                            value: value.section,
                            text: value.section
                        }));
                      });
                      
                    }
                  });
               }else{
                alert("Select Branch");
               }
               
              
              //
             
            }


             $("#section").on("change",function(){
              fetch_subjects();
             });
            function fetch_subjects(){
              
               var eid=localStorage.getItem("sid");
               var branch=document.getElementById("branch").value;
               var sem=document.getElementById("sem").value;
               var section=document.getElementById("section").value;
               if (branch!="null") {
               
                  $('#section').find('option:not(:first)' ).remove();
                  $.ajax({
                    url:"fetch_subjects.php",
                    type:"post",
                    data:{ 'branch':branch,
                        'sem':sem,
                        'eid':eid,
                        'section':section
                      },
                    success:function(data){
                     
                      var obj=JSON.parse(data);
                      $.each(obj,function(index,value){
                        $('#subject').append($('<option>', {
                            value: value.subject,
                            text: value.subject
                        }));
                      });

                      $.each(obj,function(index,value){
                        $('#section').append($('<option>', {
                            value: value.section,
                            text: value.section
                        }));
                      });
                      
                    }
                  });
               }else{
                alert("Select Branch");
               }
               
              
              //
             
            }


            function takeAttendance(){
                alert("hi");
               var eid=localStorage.getItem("sid");
               var branch=document.getElementById("branch").value;
               var sem=document.getElementById("sem").value;
               var section=document.getElementById("section").value;
               var subject=document.getElementById("subject").value;
               var date=document.getElementById("date").value;
               var slot=document.getElementById("slot").value;
                var ex_att_id= Math.floor((Math.random() * 1000000) + 1);
               
                  $.ajax({
                    url:"load_attendance_details.php",
                    type:"post",
                    data:{ 'branch':branch,
                        'sem':sem,
                        'section':section,
                        'subject':subject,
                        'date':date,
                        'slot':slot,
                        'eid':eid,
                        'ex_att_id':ex_att_id
                      },
                    success:function(data){
                      
                      $("#put_att_details").hide();
                      $("#take_attendance").show();
                      $("#submit_att").show();
                    

                     var obj=JSON.parse(data);
                        var c=1;
                        var table_content=""
                           $('#student_display').find( 'tr:not(:first)' ).remove();
                            $.each(obj,function(index,value){
                                table_content+="<tr>";
                                table_content+="<td>"+c++ +"</td>";
                                table_content+="<td>"+value.usn+"</td>";
                                table_content+="<td>"+value.name+"</td>"; 
                                var temp_id=value.sid+"_"+ex_att_id;
                                table_content+="<td><label class=\"switch\"><input type=\"checkbox\" id=\""+temp_id+"\" checked onchange=\"change_present("+ex_att_id+","+temp_id+")\"><div class=\"slider round\"></div></label></td>";
                               
                                table_content+="<td><input type=\"text\" class=\"form-control\"></td>";
                               table_content+="</tr>";
                            });
                            $("#student_display").append(table_content);
               
               }
              
              });
             
            }


            function change_present(ex_att_id,id){
              alert(id);
              if ($('#id').is(":checked"))
                {
                  alert("PRESTENT");
                }else{
                  alert("ABSENT");
                }
            }
    </script>

  </body>


</html>
